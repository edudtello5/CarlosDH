<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Textbooks - Carruseles ESO y Primaria</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: url('recursos/textbooks.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: Monaco, monospace;
    }
    .back-arrow {
      position: fixed;
      top: 24px;
      left: 24px;
      font-size: 2.5em;
      color: #fff;
      text-decoration: none;
      background: rgba(60,60,60,0.7);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10001;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      transition: background 0.2s;
    }
    .back-arrow:hover {
      background: rgba(30,30,30,0.9);
    }
    .carousel-wrapper {
      width: 80vw;
      max-width: 900px;
      margin: 40px auto;
      background: rgba(60,60,60,0.7);
      border-radius: 24px;
      box-shadow: 0 4px 32px rgba(0,0,0,0.3);
      padding: 32px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      min-height: 420px;
    }
    .carousel-title {
      font-size: 2em;
      margin-bottom: 16px;
      font-weight: bold;
      letter-spacing: 1px;
      text-shadow: 1px 1px 8px #222;
    }
    .carousel {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
      background: rgba(0,0,0,0.2);
      min-height: 360px;
    }
    .carousel-img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 480px;
      height: 360px;
      object-fit: contain;
      background: #222;
      border: 2px solid transparent;
      cursor: pointer;
      transition: transform 0.4s, filter 0.4s, opacity 0.4s;
      opacity: 0;
      z-index: 0;
      pointer-events: none;
    }
    .carousel .carousel-img.active {
      opacity: 1 !important;
      z-index: 2 !important;
      pointer-events: auto;
      transform: translate(-50%, -50%) scale(1);
    }
    .carousel .carousel-img.prev {
      left: 20%;
      opacity: 0.8 !important;
      z-index: 1 !important;
      width: 320px;
      height: 240px;
      transform: translate(-50%, -50%) scale(0.8) rotate(-5deg);
      filter: blur(2px) grayscale(60%);
      border: 2px solid orange;
      pointer-events: auto;
    }
    .carousel .carousel-img.next {
      left: 80%;
      opacity: 0.8 !important;
      z-index: 1 !important;
      width: 320px;
      height: 240px;
      transform: translate(-50%, -50%) scale(0.8) rotate(5deg);
      filter: blur(2px) grayscale(60%);
      border: 2px solid orange;
      pointer-events: auto;
    }
    .carousel-img.broken {
      outline: 2px dashed #b44;
      filter: grayscale(100%);
    }
    /* 🔽 Flechas */
    .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2.5em;
      color: white;
      background: rgba(0,0,0,0.5);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      transition: background 0.3s;
      user-select: none;
    }
    .arrow:hover {
      background: rgba(0,0,0,0.8);
    }
    .arrow-left {
      left: 16px;
    }
    .arrow-right {
      right: 16px;
    }
    #modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #modal img {
      max-width: 90vw;
      max-height: 90vh;
      background: #222;
      box-shadow: 0 4px 32px rgba(0,0,0,0.7);
    }
  </style>
</head>
<body>
  <a href="#" class="back-arrow" onclick="parent.loadPage('work.html')" title="Retroceder">&#8592;</a>

  
  <div class="carousel-wrapper">
    <div class="carousel-title">Libros ESO</div>
    <div class="carousel" id="eso-carousel">
      <div class="arrow arrow-left">&#10094;</div>
      <div class="arrow arrow-right">&#10095;</div>
    </div>
  </div>
  
  <div class="carousel-wrapper">
    <div class="carousel-title">Libros Primaria</div>
    <div class="carousel" id="primaria-carousel">
      <div class="arrow arrow-left">&#10094;</div>
      <div class="arrow arrow-right">&#10095;</div>
    </div>
  </div>
  
  <div id="modal" onclick="closeModal()">
    <img id="modal-img" src="" alt="Imagen ampliada" />
  </div>
  
  <script>
    const esoImages = [
      'recursos/ESO/65a.jpg','recursos/ESO/_punto7.jpg','recursos/ESO/001.jpg','recursos/ESO/01.jpg','recursos/ESO/11baja.jpg',
      'recursos/ESO/26.jpg','recursos/ESO/3eso_1.jpg','recursos/ESO/3eso_e2.jpg',
      'recursos/ESO/3eso_ef_4_2_1.jpg','recursos/ESO/76.jpg',
      'recursos/ESO/Lopedevega.jpg','recursos/ESO/mus1eso_u1_p10.jpg','recursos/ESO/mus1eso_u3_p34a.jpg',
      'recursos/ESO/mus1eso_u7_p82b.jpg','recursos/ESO/mus1eso_u7_p88.jpg','recursos/ESO/mus1eso_u9_p109.jpg',
      'recursos/ESO/mus3ESO_u9_p107.jpg','recursos/ESO/orilla.jpg','recursos/ESO/pagina23.jpg',
      'recursos/ESO/Papá Noel.jpg','recursos/ESO/pg49.jpg','recursos/ESO/pl63.jpg','recursos/ESO/punto13.jpg',
      'recursos/ESO/punto5.jpg','recursos/ESO/punto68.jpg'
    ];
    
    const primariaImages = [
      'recursos/Primaria/01.jpg','recursos/Primaria/02.jpg','recursos/Primaria/03.jpg','recursos/Primaria/04.jpg',
      'recursos/Primaria/05.jpg','recursos/Primaria/06.jpg','recursos/Primaria/07.jpg','recursos/Primaria/08.jpg',
      'recursos/Primaria/09.jpg','recursos/Primaria/10.jpg','recursos/Primaria/11.jpg','recursos/Primaria/12.jpg',
      'recursos/Primaria/13.jpg','recursos/Primaria/139_B_U7_198319.jpg','recursos/Primaria/14.jpg',
      'recursos/Primaria/15.jpg','recursos/Primaria/16.jpg','recursos/Primaria/17.jpg','recursos/Primaria/18.jpg',
      'recursos/Primaria/19.jpg','recursos/Primaria/198320_45_A.jpg','recursos/Primaria/20.jpg',
      'recursos/Primaria/21.jpg','recursos/Primaria/22.jpg','recursos/Primaria/23.jpg','recursos/Primaria/24.jpg',
      'recursos/Primaria/25.pg.jpg','recursos/Primaria/26.jpg','recursos/Primaria/27_29701184057_l.jpg',
      'recursos/Primaria/27.jpg','recursos/Primaria/28.jpg','recursos/Primaria/29.jpg','recursos/Primaria/30.jpg',
      'recursos/Primaria/31.jpg','recursos/Primaria/32.jpg','recursos/Primaria/33.jpg','recursos/Primaria/85_44589724022_l.jpg',
      'recursos/Primaria/caperucita.jpg','recursos/Primaria/pg48.jpg','recursos/Primaria/pg53.jpg','recursos/Primaria/taller3.jpg'
    ];
    
    function createCarousel(images, carouselId) {
      const carousel = document.getElementById(carouselId);
      let current = 0;
      let imgElements = [];
      let startX = null;
      let dragging = false;
      
      function init() {
        images.forEach((src, i) => {
          let img = document.createElement('img');
          img.src = src;
          img.className = 'carousel-img';
          img.onerror = () => img.classList.add('broken');
          img.addEventListener('click', () => {
            if (i === current) openModal(src);
          });
          carousel.appendChild(img);
          imgElements.push(img);
        });
        update();
      }
      
      function update() {
        imgElements.forEach((img, i) => {
          img.className = 'carousel-img';
          if (i === current) img.classList.add('active');
          else if (i === (current - 1 + images.length) % images.length) img.classList.add('prev');
          else if (i === (current + 1) % images.length) img.classList.add('next');
        });
      }
      
      function next() {
        current = (current + 1) % images.length;
        update();
      }
      function prev() {
        current = (current - 1 + images.length) % images.length;
        update();
      }
      
      function onDragStart(e) {
        dragging = true;
        startX = e.type.startsWith('touch') ? e.touches[0].clientX : e.clientX;
      }
      function onDragEnd(e) {
        if (!dragging) return;
        let endX = e.type.startsWith('touch') ? e.changedTouches[0].clientX : e.clientX;
        let delta = endX - startX;
        if (Math.abs(delta) > 50) {
          if (delta < 0) next();
          else prev();
        }
        dragging = false;
        startX = null;
      }
      
      // Eventos swipe
      carousel.addEventListener('mousedown', onDragStart);
      carousel.addEventListener('touchstart', onDragStart);
      carousel.addEventListener('mouseup', onDragEnd);
      carousel.addEventListener('touchend', onDragEnd);
      
      // Eventos flechas
      carousel.querySelector('.arrow-left').addEventListener('click', prev);
      carousel.querySelector('.arrow-right').addEventListener('click', next);
      
      init();
    }
    
    function openModal(src) {
      document.getElementById('modal-img').src = src;
      document.getElementById('modal').style.display = 'flex';
      document.querySelector('.back-arrow').style.display = 'none';
    }
    function closeModal() {
      document.getElementById('modal').style.display = 'none';
      document.getElementById('modal-img').src = '';
      document.querySelector('.back-arrow').style.display = '';
    }
    
    createCarousel(esoImages, 'eso-carousel');
    createCarousel(primariaImages, 'primaria-carousel');
  </script>
</body>
</html>
